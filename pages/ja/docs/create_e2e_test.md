# DIMBULA E2Eのテスト条件と手順を作成
DIMBULA E2Eテストを行うために、テストの手順や実機モバイルの指定が必要です。

一例として、[ToDoアプリ](https://github.com/kunimasu-com/DIMBULA-simple-tap-text-input) の [E2Eテスト手順・条件を記載したYAMLファイル](https://github.com/kunimasu-com/DIMBULA-simple-tap-text-input/blob/main/.dimbula/e2e/main/pixel4a.yml) を参照ください。

# セットアップ
以下の流れに沿って、必要なセットアップを行います。

1. プロジェクト直下に`.dimbula/e2e`のディレクトリを作成
2. `.dimbula/e2e`以下にテストしたいブランチ毎にディレクトリを作成
3. ブランチ毎に作成したディレクトリ直下に、DIMBULA Computingで作成したYAMLファイルを任意のファイル名で保存

## `.dimbula/e2e`のディレクトリ
隠しディレクトリとして作成してください。DIMBULAの専用アクションがE2Eテストに必要なYAMLファイルを検索します。

## ブランチ毎のディレクトリ
機能開発、リファクタリングなど用途毎にブランチを切っている場合、E2Eでテストする内容も異なってきます。DIMBULA E2Eでは、ブランチ毎に対応するE2Eのテストシナリオを作成できるので、必要に応じて`.dimbula/e2e`以下にブランチ名のディレクトリを作成してください。

e.g. `.dimbula/e2e/feature/new_function`

## YAMLファイル保存
ブランチ毎に定義したユーザのテストシナリオをブランチ名のディレクトリ以下に保存します。ファイル名は任意です。どんなテストシナリオなのか分かるように、モバイル名や内容にあわせて自由にファイル名を設定してください。ファイル名はDIMBULA内では利用していません。

e.g. `.dimbula/e2e/feature/new_function/pixel4a_13_en.yml`

# E2Eテストの作成単位と注意
DIMBULA E2Eで使用するYAMLファイルには、対象のモバイル名、OSのバージョンを指定する関係で、テストしたいそれら組み合わせの分だけブランチ以下に保存するYAMLファイルが必要になります。

テスト手順では、タップ系統の操作が左上座標XとYを(0,0)、右下を(1,1)として扱うため類似した解像度の端末であればテスト手順の部分をコピーして、モバイル名とOSバージョンのところを変更したYAMLファイルを作成することはできます。
こういった一部流用することでYAMLファイルの作成コストを抑えられますが、小さいボタンをタップする、スクロールが発生するような画面をテストする際は、座標系が意図通りに動作しない可能性があるので、DIMBULA Computingを使ってモバイル毎にYAMLファイルを作成することを推奨します。
